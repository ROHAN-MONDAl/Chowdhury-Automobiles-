# ====================================================
# SECURITY & ROUTING RULES
# ====================================================
RewriteEngine On

# Block directory listing
Options -Indexes

# Remove multiple slashes in the URL
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s.*//+.*\sHTTP/
RewriteRule .* 404.php [L]

# Redirect any non-existent files or directories to 404
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ 404.php [L]

# Fallback 404 error page
ErrorDocument 404 /404.php